<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz Arabic Preview</title>
  <style>
    :root {
      --bg: #171717;
      --panel: #1f1f1f;
      --line: #333;
      --gold: #a39466;
      --gold-2: #b8a775;
      --text: #fff;
      --muted: #b7b7b7;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: radial-gradient(circle at 15% 15%, rgba(163,148,102,0.12), transparent 35%),
                  radial-gradient(circle at 85% 85%, rgba(163,148,102,0.08), transparent 38%),
                  var(--bg);
      color: var(--text);
      font-family: "Tahoma", "Arial", sans-serif;
      min-height: 100vh;
    }

    .wrap {
      width: min(980px, 92vw);
      margin: 32px auto;
      padding: 24px;
      border: 1px solid #2a2a2a;
      border-radius: 20px;
      background: rgba(23, 23, 23, 0.85);
      backdrop-filter: blur(3px);
    }

    h1 {
      margin: 0 0 10px;
      font-size: clamp(22px, 3vw, 32px);
      text-align: center;
    }

    .sub {
      margin: 0 0 24px;
      color: var(--muted);
      text-align: center;
    }

    .progress {
      height: 6px;
      border-radius: 999px;
      background: #2a2a2a;
      overflow: hidden;
      margin-bottom: 22px;
    }

    .progress > span {
      display: block;
      height: 100%;
      background: linear-gradient(to left, var(--gold), var(--gold-2));
      width: 0;
      transition: width .25s ease;
    }

    .step-index {
      text-align: center;
      color: var(--gold);
      margin-bottom: 18px;
      font-size: 14px;
    }

    .card {
      border: 1px solid #2e2e2e;
      background: #191919;
      border-radius: 16px;
      padding: 22px;
    }

    .question {
      font-size: clamp(20px, 2.6vw, 30px);
      text-align: center;
      margin: 0 0 20px;
      line-height: 1.4;
    }

    .options {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .opt {
      border: 2px solid var(--line);
      border-radius: 12px;
      background: var(--panel);
      color: var(--text);
      min-height: 58px;
      padding: 10px 14px;
      cursor: pointer;
      font-size: 16px;
      transition: .2s ease;
    }

    .opt:hover {
      border-color: rgba(163,148,102,.6);
      transform: translateY(-1px);
    }

    .opt.active {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(163,148,102,.2);
      color: #e8ddb8;
    }

    .contact-lead {
      color: var(--muted);
      margin: 0 0 14px;
      text-align: center;
    }

    .field { margin-bottom: 12px; }

    .field label {
      display: block;
      color: var(--gold);
      margin-bottom: 6px;
      font-size: 14px;
    }

    input, select {
      width: 100%;
      height: 48px;
      border: 2px solid var(--line);
      background: var(--panel);
      border-radius: 10px;
      padding: 0 12px;
      color: var(--text);
      font-size: 16px;
      outline: none;
    }

    input:focus, select:focus {
      border-color: var(--gold);
    }

    .phone-row {
      display: grid;
      grid-template-columns: 220px 1fr;
      gap: 10px;
    }

    .agree {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
      color: #d5d5d5;
      font-size: 14px;
    }

    .agree input {
      width: 16px;
      height: 16px;
      accent-color: var(--gold);
    }

    .actions {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 18px;
    }

    .btn {
      border: 0;
      border-radius: 10px;
      min-height: 46px;
      padding: 0 18px;
      font-size: 15px;
      cursor: pointer;
    }

    .btn.prev {
      background: transparent;
      color: var(--gold);
      border: 2px solid var(--gold);
    }

    .btn.next {
      color: #171717;
      font-weight: 700;
      background: linear-gradient(to left, var(--gold), var(--gold-2));
    }

    .btn[disabled] {
      opacity: .45;
      cursor: not-allowed;
    }

    .hint {
      margin-top: 10px;
      text-align: center;
      color: #7e7e7e;
      font-size: 12px;
    }

    @media (max-width: 700px) {
      .options { grid-template-columns: 1fr; }
      .phone-row { grid-template-columns: 1fr; }
      .wrap { padding: 16px; margin: 16px auto; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙƒÙˆÙŠØ²</h1>
    <p class="sub">Ù†ÙØ³ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ù†Ù…ÙˆØ°Ø¬ ØªÙˆØ§ØµÙ„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¬Ø±Ø¨Ø©</p>

    <div class="progress"><span id="progressBar"></span></div>
    <div id="stepIndex" class="step-index"></div>

    <div class="card">
      <h2 id="question" class="question"></h2>

      <div id="options" class="options"></div>

      <div id="contact" style="display:none">
        <p class="contact-lead">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø°ÙŠ Ø³Ù†Ø±Ø³Ù„ Ø¥Ù„ÙŠÙ‡ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª</p>

        <div class="field">
          <label>Ø§Ù„Ø§Ø³Ù… *</label>
          <input id="name" placeholder="Name" />
        </div>

        <div class="field">
          <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
          <div class="phone-row">
            <select id="country">
              <option value="+971" data-mask="50 123 4567">ğŸ‡¦ğŸ‡ª Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª +971</option>
              <option value="+966" data-mask="50 123 4567">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© +966</option>
              <option value="+20" data-mask="100 123 4567">ğŸ‡ªğŸ‡¬ Ù…ØµØ± +20</option>
              <option value="+213" data-mask="555 12 34 56">ğŸ‡©ğŸ‡¿ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± +213</option>
              <option value="+1" data-mask="(201) 555-0123">ğŸ‡ºğŸ‡¸ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø© +1</option>
              <option value="+44" data-mask="7400 123456">ğŸ‡¬ğŸ‡§ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù…ØªØ­Ø¯Ø© +44</option>
            </select>
            <input id="phone" placeholder="50 123 4567" inputmode="numeric" />
          </div>
        </div>

        <div class="field">
          <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
          <input id="email" placeholder="Email" />
        </div>

        <label class="agree">
          <input id="agree" type="checkbox" />
          <span>I agree to the Privacy Policy</span>
        </label>
      </div>

      <div class="actions">
        <button id="prevBtn" class="btn prev">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button id="nextBtn" class="btn next">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>

      <p class="hint" id="hint"></p>
    </div>
  </div>

  <script>
    const steps = [
      {
        title: "Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ø°ÙŠ ØªÙ‡ØªÙ… Ø¨Ù‡ØŸ",
        options: ["Ù„Ø§ Ø£Ø¹Ø±Ù Ø¨Ø¹Ø¯", "Ø´Ù‚Ù‚", "ÙÙ„Ù„", "ØªØ§ÙˆÙ† Ù‡Ø§ÙˆØ³"]
      },
      {
        title: "Ù…Ø§ Ù‡Ø¯ÙÙƒ Ù…Ù† Ø§Ù„Ø´Ø±Ø§Ø¡ØŸ",
        options: ["Ù„Ù†ÙØ³ÙŠ", "Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±"]
      },
      {
        title: "ÙƒÙ… Ø¹Ø¯Ø¯ ØºØ±Ù Ø§Ù„Ù†ÙˆÙ… Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§ØŸ",
        options: ["Ù„Ø§ Ø£Ø¹Ø±Ù Ø¨Ø¹Ø¯", "ØºØ±ÙØ© Ù†ÙˆÙ… ÙˆØ§Ø­Ø¯Ø©", "ØºØ±ÙØªØ§ Ù†ÙˆÙ…", "3 ØºØ±Ù Ù†ÙˆÙ…", "4 ØºØ±Ù Ù†ÙˆÙ… ÙØ£ÙƒØ«Ø±"]
      },
      {
        title: "Ø­Ø¯Ø¯ Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„",
        options: ["250,000$ - 300,000$", "300,000$ - 500,000$", "500,000$ - 1,000,000$", "1,000,000$ - 1,500,000$", "1,500,000$ ÙØ£ÙƒØ«Ø±"]
      },
      {
        title: "Ù…ÙˆØ¹Ø¯ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…ØŸ",
        options: ["Ø¥Ø·Ù„Ø§Ù‚ Ø¬Ø¯ÙŠØ¯", "2026", "2027", "2028", "2029", "2030"]
      },
      {
        title: "ÙƒÙŠÙ ØªÙØ¶Ù„ Ø£Ù† Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„Ù…Ù†Ø§Ù‚Ø´Ø© Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙˆØ³Ø¹ØŸ",
        options: ["Ø¹Ø¨Ø± Ù…ÙƒØ§Ù„Ù…Ø© Ù‡Ø§ØªÙÙŠØ©", "Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨", "Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…"]
      },
      {
        title: "Provide your name and phone number where we will send you the selection",
        contact: true
      }
    ];

    const state = {
      step: 0,
      answers: {},
      contact: {
        name: "",
        phone: "",
        email: "",
        country: "+971",
        agree: false
      }
    };

    const question = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const contactEl = document.getElementById('contact');
    const stepIndex = document.getElementById('stepIndex');
    const progressBar = document.getElementById('progressBar');
    const hint = document.getElementById('hint');

    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    const nameInput = document.getElementById('name');
    const phoneInput = document.getElementById('phone');
    const emailInput = document.getElementById('email');
    const countrySelect = document.getElementById('country');
    const agreeInput = document.getElementById('agree');

    function updatePhoneMaskHint() {
      const selected = countrySelect.options[countrySelect.selectedIndex];
      phoneInput.placeholder = selected.dataset.mask || '000 000 0000';
    }

    function digitsOnly(v) {
      return (v || '').replace(/\D/g, '');
    }

    function formatByMask(digits, mask) {
      let i = 0;
      return mask.replace(/\d/g, () => digits[i++] || '').replace(/[\s-]+$/g, '');
    }

    function render() {
      const current = steps[state.step];
      const total = steps.length;

      question.textContent = current.title;
      stepIndex.textContent = `Ø§Ù„Ø®Ø·ÙˆØ© ${state.step + 1} Ù…Ù† ${total}`;
      progressBar.style.width = `${((state.step + 1) / total) * 100}%`;

      optionsEl.innerHTML = '';
      contactEl.style.display = current.contact ? 'block' : 'none';
      optionsEl.style.display = current.contact ? 'none' : 'grid';

      if (!current.contact) {
        current.options.forEach((opt) => {
          const btn = document.createElement('button');
          btn.className = 'opt';
          if (state.answers[state.step] === opt) btn.classList.add('active');
          btn.textContent = opt;
          btn.onclick = () => {
            state.answers[state.step] = opt;
            render();
          };
          optionsEl.appendChild(btn);
        });
      }

      prevBtn.disabled = state.step === 0;
      nextBtn.textContent = state.step === total - 1 ? 'Ø¥Ø±Ø³Ø§Ù„' : 'Ø§Ù„ØªØ§Ù„ÙŠ';
      nextBtn.disabled = !canProceed();

      hint.textContent = current.contact
        ? 'Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Name, Phone, Privacy Policy'
        : '';
    }

    function canProceed() {
      const current = steps[state.step];
      if (!current.contact) return Boolean(state.answers[state.step]);

      return (
        state.contact.name.trim().length > 0 &&
        state.contact.phone.trim().length > 0 &&
        state.contact.agree
      );
    }

    prevBtn.onclick = () => {
      if (state.step > 0) {
        state.step -= 1;
        render();
      }
    };

    nextBtn.onclick = () => {
      if (!canProceed()) return;
      if (state.step < steps.length - 1) {
        state.step += 1;
        render();
        return;
      }

      alert('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙ‚Ø·)');
      console.log('Preview payload', {
        ...state.answers,
        fullName: state.contact.name,
        phone: `${state.contact.country} ${state.contact.phone}`,
        email: state.contact.email
      });
    };

    nameInput.oninput = (e) => {
      state.contact.name = e.target.value;
      render();
    };

    emailInput.oninput = (e) => {
      state.contact.email = e.target.value;
    };

    countrySelect.onchange = (e) => {
      state.contact.country = e.target.value;
      updatePhoneMaskHint();
      phoneInput.dispatchEvent(new Event('input'));
    };

    phoneInput.oninput = (e) => {
      const selected = countrySelect.options[countrySelect.selectedIndex];
      const mask = selected.dataset.mask || '000 000 0000';
      const cleaned = digitsOnly(e.target.value).slice(0, (mask.match(/\d/g) || []).length);
      e.target.value = formatByMask(cleaned, mask);
      state.contact.phone = e.target.value;
      render();
    };

    agreeInput.onchange = (e) => {
      state.contact.agree = e.target.checked;
      render();
    };

    state.contact.country = countrySelect.value;
    updatePhoneMaskHint();
    render();
  </script>
</body>
</html>
